<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>lab3</title>
      <style>.markdown-preview:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(171, 178, 191); overflow: auto; background-color: rgb(40, 44, 52); }
.markdown-preview:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview:not([data-use-github-style]) h1, .markdown-preview:not([data-use-github-style]) h2, .markdown-preview:not([data-use-github-style]) h3, .markdown-preview:not([data-use-github-style]) h4, .markdown-preview:not([data-use-github-style]) h5, .markdown-preview:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) strong { color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) del { color: rgb(124, 135, 156); }
.markdown-preview:not([data-use-github-style]) a, .markdown-preview:not([data-use-github-style]) a code { color: rgb(82, 139, 255); }
.markdown-preview:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) > ul, .markdown-preview:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(124, 135, 156); border-color: rgb(75, 83, 98); border-width: 4px; }
.markdown-preview:not([data-use-github-style]) hr { margin: 3em 0px; border-top-width: 2px; border-top-style: dashed; border-top-color: rgb(75, 83, 98); background: none; }
.markdown-preview:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview:not([data-use-github-style]) th { color: rgb(255, 255, 255); }
.markdown-preview:not([data-use-github-style]) th, .markdown-preview:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(75, 83, 98); }
.markdown-preview:not([data-use-github-style]) code { color: rgb(255, 255, 255); background-color: rgb(58, 63, 75); }
.markdown-preview:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(49, 54, 63); }
.markdown-preview:not([data-use-github-style]) kbd { color: rgb(255, 255, 255); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(75, 83, 98) rgb(75, 83, 98) rgb(62, 68, 81); background-color: rgb(58, 63, 75); }
.markdown-preview[data-use-github-style] { font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); overflow: scroll; background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview[data-use-github-style] h1, .markdown-preview[data-use-github-style] h2, .markdown-preview[data-use-github-style] h3, .markdown-preview[data-use-github-style] h4, .markdown-preview[data-use-github-style] h5, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview[data-use-github-style] h1 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview[data-use-github-style] h1 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] p, .markdown-preview[data-use-github-style] blockquote, .markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol, .markdown-preview[data-use-github-style] dl, .markdown-preview[data-use-github-style] table, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; border: 0px none; background-color: rgb(231, 231, 231); }
.markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview[data-use-github-style] ul.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview[data-use-github-style] ul ul, .markdown-preview[data-use-github-style] ul ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left-width: 4px; border-left-style: solid; border-left-color: rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview[data-use-github-style] table th, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] table tr { border-top-width: 1px; border-top-style: solid; border-top-color: rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] code, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; border-radius: 3px; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview[data-use-github-style] code::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview[data-use-github-style] code::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: "Â "; }
.markdown-preview[data-use-github-style] code br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; border: 0px; background: transparent; }
.markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview[data-use-github-style] .highlight pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; border-radius: 3px; background-color: rgb(247, 247, 247); }
.markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview[data-use-github-style] pre code, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview[data-use-github-style] pre code::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; border-style: solid; border-width: 1px; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview[data-use-github-style] code { color: inherit; }
.markdown-preview[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.scrollbars-visible-always .markdown-preview pre.editor-colors::shadow .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors::shadow .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview pre.editor-colors:hover::shadow .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors:hover::shadow .horizontal-scrollbar { visibility: visible; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}

.spell-check-misspelling .region {
  border-bottom: 2px dotted rgba(255, 51, 51, 0.75);
}

pre.editor-colors,
.host {
  background-color: #282c34;
  color: #abb2bf;
}
pre.editor-colors .line.cursor-line,
.host .line.cursor-line {
  background-color: rgba(153, 187, 255, 0.04);
}
pre.editor-colors .invisible,
.host .invisible {
  color: #abb2bf;
}
pre.editor-colors .cursor,
.host .cursor {
  border-left: 2px solid #528bff;
}
pre.editor-colors .selection .region,
.host .selection .region {
  background-color: #3e4451;
}
pre.editor-colors .bracket-matcher .region,
.host .bracket-matcher .region {
  border-bottom: 1px solid #528bff;
  box-sizing: border-box;
}
pre.editor-colors .invisible-character,
.host .invisible-character {
  color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .indent-guide,
.host .indent-guide {
  color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .wrap-guide,
.host .wrap-guide {
  background-color: rgba(171, 178, 191, 0.15);
}
pre.editor-colors .gutter .line-number,
.host .gutter .line-number {
  color: #636d83;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.cursor-line,
.host .gutter .line-number.cursor-line {
  color: #abb2bf;
  background-color: #2c313a;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection,
.host .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right,
.host .gutter .line-number .icon-right {
  color: #abb2bf;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before,
.host .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before {
  bottom: -3px;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed::after,
.host .gutter:not(.git-diff-icon) .line-number.git-line-removed::after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(224, 82, 82, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.folded,
.host .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
.host .gutter .line-number:after,
pre.editor-colors .fold-marker:after,
.host .fold-marker:after {
  color: #abb2bf;
}
.comment {
  color: #5c6370;
  font-style: italic;
}
.comment .markup.link {
  color: #5c6370;
}
.entity.name.type {
  color: #e5c07b;
}
.entity.other.inherited-class {
  color: #98c379;
}
.keyword {
  color: #c678dd;
}
.keyword.control {
  color: #c678dd;
}
.keyword.operator {
  color: #abb2bf;
}
.keyword.other.special-method {
  color: #61afef;
}
.keyword.other.unit {
  color: #d19a66;
}
.storage {
  color: #c678dd;
}
.storage.type.annotation,
.storage.type.primitive {
  color: #c678dd;
}
.storage.modifier.package,
.storage.modifier.import {
  color: #abb2bf;
}
.constant {
  color: #d19a66;
}
.constant.variable {
  color: #d19a66;
}
.constant.character.escape {
  color: #56b6c2;
}
.constant.numeric {
  color: #d19a66;
}
.constant.other.color {
  color: #56b6c2;
}
.constant.other.symbol {
  color: #56b6c2;
}
.variable {
  color: #e06c75;
}
.variable.interpolation {
  color: #be5046;
}
.variable.parameter {
  color: #abb2bf;
}
.string {
  color: #98c379;
}
.string.regexp {
  color: #56b6c2;
}
.string.regexp .source.ruby.embedded {
  color: #e5c07b;
}
.string.other.link {
  color: #e06c75;
}
.punctuation.definition.comment {
  color: #5c6370;
}
.punctuation.definition.method-parameters,
.punctuation.definition.function-parameters,
.punctuation.definition.parameters,
.punctuation.definition.separator,
.punctuation.definition.seperator,
.punctuation.definition.array {
  color: #abb2bf;
}
.punctuation.definition.heading,
.punctuation.definition.identity {
  color: #61afef;
}
.punctuation.definition.bold {
  color: #e5c07b;
  font-weight: bold;
}
.punctuation.definition.italic {
  color: #c678dd;
  font-style: italic;
}
.punctuation.section.embedded {
  color: #be5046;
}
.punctuation.section.method,
.punctuation.section.class,
.punctuation.section.inner-class {
  color: #abb2bf;
}
.support.class {
  color: #e5c07b;
}
.support.type {
  color: #56b6c2;
}
.support.function {
  color: #56b6c2;
}
.support.function.any-method {
  color: #61afef;
}
.entity.name.function {
  color: #61afef;
}
.entity.name.class,
.entity.name.type.class {
  color: #e5c07b;
}
.entity.name.section {
  color: #61afef;
}
.entity.name.tag {
  color: #e06c75;
}
.entity.other.attribute-name {
  color: #d19a66;
}
.entity.other.attribute-name.id {
  color: #61afef;
}
.meta.class {
  color: #e5c07b;
}
.meta.class.body {
  color: #abb2bf;
}
.meta.method-call,
.meta.method {
  color: #abb2bf;
}
.meta.definition.variable {
  color: #e06c75;
}
.meta.link {
  color: #d19a66;
}
.meta.require {
  color: #61afef;
}
.meta.selector {
  color: #c678dd;
}
.meta.separator {
  background-color: #373b41;
  color: #abb2bf;
}
.meta.tag {
  color: #abb2bf;
}
.underline {
  text-decoration: underline;
}
.none {
  color: #abb2bf;
}
.invalid.deprecated {
  color: #523d14 !important;
  background-color: #e0c285 !important;
}
.invalid.illegal {
  color: #ffffff !important;
  background-color: #e05252 !important;
}
.markup.bold {
  color: #d19a66;
  font-weight: bold;
}
.markup.changed {
  color: #c678dd;
}
.markup.deleted {
  color: #e06c75;
}
.markup.italic {
  color: #c678dd;
  font-style: italic;
}
.markup.heading {
  color: #e06c75;
}
.markup.heading .punctuation.definition.heading {
  color: #61afef;
}
.markup.link {
  color: #c678dd;
}
.markup.inserted {
  color: #98c379;
}
.markup.quote {
  color: #d19a66;
}
.markup.raw {
  color: #98c379;
}
.source.cs .keyword.operator {
  color: #c678dd;
}
.source.css .property-name,
.source.css .property-value {
  color: #828997;
}
.source.css .property-name.support,
.source.css .property-value.support {
  color: #abb2bf;
}
.source.gfm .markup {
  -webkit-font-smoothing: auto;
}
.source.gfm .link .entity {
  color: #61afef;
}
.source.ini .keyword.other.definition.ini {
  color: #e06c75;
}
.source.java .storage.modifier.import {
  color: #e5c07b;
}
.source.java .storage.type {
  color: #e5c07b;
}
.source.java-properties .meta.key-pair {
  color: #e06c75;
}
.source.java-properties .meta.key-pair > .punctuation {
  color: #abb2bf;
}
.source.js .keyword.operator {
  color: #56b6c2;
}
.source.js .keyword.operator.delete,
.source.js .keyword.operator.in,
.source.js .keyword.operator.of,
.source.js .keyword.operator.instanceof,
.source.js .keyword.operator.new,
.source.js .keyword.operator.typeof,
.source.js .keyword.operator.void {
  color: #c678dd;
}
.source.json .meta.structure.dictionary.json > .string.quoted.json {
  color: #e06c75;
}
.source.json .meta.structure.dictionary.json > .string.quoted.json > .punctuation.string {
  color: #e06c75;
}
.source.json .meta.structure.dictionary.json > .value.json > .string.quoted.json,
.source.json .meta.structure.array.json > .value.json > .string.quoted.json,
.source.json .meta.structure.dictionary.json > .value.json > .string.quoted.json > .punctuation,
.source.json .meta.structure.array.json > .value.json > .string.quoted.json > .punctuation {
  color: #98c379;
}
.source.json .meta.structure.dictionary.json > .constant.language.json,
.source.json .meta.structure.array.json > .constant.language.json {
  color: #56b6c2;
}
.source.ruby .constant.other.symbol > .punctuation {
  color: inherit;
}
.source.python .keyword.operator.logical.python {
  color: #c678dd;
}
.source.python .variable.parameter {
  color: #d19a66;
}
</style>
  </head>
  <body class='markdown-preview' data-use-github-style><p><a name="top"></a></p>
<h1 id="bash-script-writing">Bash Script Writing</h1>
<p>In this lab, we will go through</p>
<ul>
<li>Basic elements for writing Bash scripts e.g. variable assignments, conditional statements</li>
<li>Examples on content processing</li>
</ul>
<p><a href="code/lab3.zip">Example scripts used in this lab (.zip)</a></p>
<p>(Prepared by <a href="http://www.cse.cuhk.edu.hk/~hwchan">Helen Chan</a> and <a href="http://www.cse.cuhk.edu.hk/~lqyu">Lequan Yu</a>)</p>
<h2 id="content">Content</h2>
<ol>
<li><a href="#bash">Elements in Bash Scripts</a><ul>
<li><a href="#run">Running a script</a></li>
<li><a href="#var">Variables</a></li>
<li><a href="#array">Array</a></li>
<li><a href="#cal">Arithmetic</a></li>
<li><a href="#condition">Conditional statements</a><ul>
<li><a href="#expression">Expressions</a></li>
</ul>
</li>
<li><a href="#loop">Loops</a></li>
<li><a href="#inout">Input/output</a></li>
<li><a href="#function">Functions</a></li>
</ul>
</li>
<li><a href="#processing">Examples on Content Processing</a><ul>
<li><a href="#ifs">Splitting a string with <code>IFS</code></a></li>
<li><a href="#awk">Splitting a string using <code>awk</code></a></li>
<li><a href="#count">Counting lines, words, and characters</a></li>
</ul>
</li>
<li><a href="#exercise">Exercise</a><ul>
<li><a href="#exvar">Variables</a></li>
<li><a href="#exprocess">Content processing</a></li>
</ul>
</li>
<li><a href="#ref">Reference</a></li>
</ol>
<p><a name="bash"></a></p>
<h2 id="elements-in-bash-scripts">Elements in Bash Scripts</h2>
<p>So far in the last few labs, we have been executing commands inside the Bash shell.
To create the simplest Bash <em>script</em> , you may gather a list of commands, put it into a file, e.g. <a href="code/myscript.sh"><code>myscript.sh</code></a>, and then execute <code>bash ./myscript.sh</code>.</p>
<p>Nevertheless, we can do more than executing commands sequentially and independently, e.g. establish a control flow for automating repeated tasks.
Let us learn the basic elements for writing Bash scripts.</p>
<p><a name="run"></a></p>
<h3 id="running-a-script">Running a script</h3>
<p>To run a bash script, you may pass it as an argument to the command <code>bash</code>, e.g. to execute <code>myscript.sh</code></p>
<p><code>$ bash ./myscript.sh</code></p>
<p>Alternatively, we may put a <a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29"><em>shebang</em></a>, <code>#!/bin/bash</code>, at the beginning of a script. This shebang tells the OS to use <code>/bin/bash</code> to parse and run the script.</p>
<p>Then, mark the script as executable using <code>chmod</code> (option <code>+x</code> means marking the file as executable, and option <code>a</code> before <code>+x</code> means this change applies to all users&quot;),</p>
<p><code>$ chmod a+x ./myscript.sh</code></p>
<p>And the script can be run directly,</p>
<p><code>$ ./myscript.sh</code></p>
<p><a name="var"></a></p>
<h3 id="variable">Variable</h3>
<p><a name="global"></a></p>
<h4 id="global-variables">Global variables</h4>
<p>Since there are <strong>no data type in Bash script</strong> (unlike C), the same variable may hold numbers or characters at different times. Simply define and assign a value to a variable using the syntax <code>[variable name]=[value]</code>, e.g.</p>
<p><code>mynum=3150</code></p>
<p><code>mystr=&quot;hello world&quot;</code></p>
<p><strong>Beware that spaces are not allowed before or after the assignment operator <code>=</code>.</strong></p>
<p>By default, variables are <em>global</em> and its assigned value are visible to statements that run after the assignment.</p>
<p>To make a variable <em>local</em>, specify <code>local</code> explicitly before the variable name, e.g.</p>
<p><code>local mynum=315</code></p>
<p>Other than assigning a value, we may &quot;grow&quot; a variable by appending values using the operator <code>+=</code>, e.g.</p>
<p><code>mystr=&quot;csci&quot;</code></p>
<p><code>mystr+=&quot;3150&quot;</code></p>
<p>and <code>mystr</code> now contains &quot;csci3150&quot;.</p>
<p>To retrieve the value of a variable, we use the syntax <code>${variable name}</code>. The <code>$</code> means value retrieval, while <code>{}</code> is used to separate the variable name from other characters.
The following script <a href="code/variable.sh">variable.sh</a> shows an example on appending values to a variable, and when <code>{}</code> is necessary.</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>mynum=3150</span></span></div><div class="line"><span class="source shell"><span>course_code=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>csci</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>mystr=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>course_code</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;grow&nbsp;mystr&nbsp;from&nbsp;3150&nbsp;to&nbsp;&quot;3150?&quot;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Before:&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>mystr</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>mystr+=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>mynum</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>After:&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>mystr</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;when&nbsp;curly&nbsp;braces&nbsp;are&nbsp;necessary</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>course_code</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>3150&nbsp;is&nbsp;a&nbsp;course&nbsp;about&nbsp;OS</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div></pre>
<p><a href="#top">(Back to top)</a></p>
<p><a name="array"></a></p>
<h3 id="array">Array</h3>
<p>To declare an empty array <code>myarray</code>,</p>
<p><code>myarray=()</code></p>
<p>We may also assign values on declaration as follow, with each value separated by a space,</p>
<p><code>myarray=(&quot;three&quot; 1 &quot;five&quot; 0)</code></p>
<p>The array index starts from 0 (as in C), so if we want to replace the third item as <code>eight</code>, we can execute</p>
<p><code>myarray[2]=&quot;eight&quot;</code></p>
<p>We may add an item with any positive index, e.g.</p>
<p><code>myarray[5]=&quot;!&quot;</code></p>
<p>To get the first item,</p>
<p><code>${myarray[0]}</code></p>
<p>To get the whole array,</p>
<p><code>${myarray[@]}</code></p>
<p>To get the number of items in the array,</p>
<p><code>${#myarray[@]}</code></p>
<p>To get the keys used in the array,</p>
<p><code>${!myarray[@]}</code></p>
<p>Look into and execute <a href="code/array.sh">array.sh</a> which includes examples on the usage listed above.</p>
<p><a href="#top">(Back to top)</a></p>
<h4 id="strings">Strings</h4>
<p>Strings can be though as an array of characters, and we may get its length by</p>
<p><code>${#mystr}</code></p>
<p>Also, the string can be split as if an array, see <a href="code/string.sh">string.sh</a> for an example.</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>mylongstr=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>this&nbsp;is&nbsp;a&nbsp;long&nbsp;string</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>My&nbsp;string:&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>mylongstr</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Number&nbsp;of&nbsp;characters&nbsp;in&nbsp;string:&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span class="keyword operator expansion shell"><span>#</span></span><span>mylongstr</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Splitting&nbsp;my&nbsp;string&nbsp;like&nbsp;an&nbsp;array:</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>word</span></span><span>&nbsp;</span><span class="keyword control shell"><span>in</span></span><span>&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>mylongstr</span><span class="punctuation section array shell"><span>[</span></span><span>@</span><span class="punctuation section array shell"><span>]</span></span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>word</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>done</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div></pre>
<p><a href="#top">(Back to top)</a></p>
<p><a name="cal"></a></p>
<h3 id="arithmetic">Arithmetic</h3>
<p>To do simple arithmetic on <strong>whole numbers</strong> in Bash, you can put the arithmetic expression inside a double parentheses after a dollar sign <code>$(())</code>.</p>
<p>For example, to store the sum of two variables <code>a</code> and <code>b</code> into <code>mysum</code>,</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>a=2</span></span></div><div class="line"><span class="source shell"><span>b=3</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>mysum=</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>$((</span></span><span>a</span><span class="keyword operator arithmetic shell"><span>+</span></span><span>b</span><span class="punctuation definition string end shell"><span>))</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Sum&nbsp;of&nbsp;a=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>a</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;and&nbsp;b=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>b</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;is&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>mysum</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div></pre>
<p>Other than summation, we can do subtraction (<code>-</code>), multiplication (<code>*</code>), division (<code>/</code>) and also get the remainder of division (<code>%</code>).</p>
<p>Besides, you can increment/decrement counters using the operator <code>++</code> and <code>--</code>, e.g. to increment or decrement variable <code>counter</code></p>
<p> <code>(( counter++ ))</code>, or <code>(( counter-- ))</code></p>
<p>The <code>$</code> can be omitted in this case, as we are not retrieving the value. We will find the increment/decrement syntax handy in the examples on <a href="#loop">loops</a> later on.</p>
<p><a href="#top">(Back to top)</a></p>
<p><a name="condition"></a></p>
<h3 id="conditional-statements-if-then-else-">Conditional statements, if ... then ... else ...</h3>
<p>The format of &quot;If-then-else&quot; statements in Bash script is as follows:</p>
<p><strong>if</strong> <em>expression</em> <strong>then</strong> <em>statement</em> <strong>else</strong> <em>statement</em> <strong>fi</strong></p>
<p>or</p>
<p><strong>if</strong> <em>expression</em> <strong>then</strong> <em>statement</em> <strong>elif</strong> <em>expression</em> <strong>then</strong> <em>statement</em> <strong>else</strong> <em>statement</em> <strong>fi</strong></p>
<p><a name="conditionex"></a>
Let illustrate the syntax with an example <a href="code/condition.sh">condition.sh</a>,</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>A=1</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>$((</span></span><span>A</span><span class="punctuation definition string end shell"><span>))</span></span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-eq</span></span><span>&nbsp;0&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>A&nbsp;equals&nbsp;to&nbsp;0</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>elif</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>$((</span></span><span>A</span><span class="punctuation definition string end shell"><span>))</span></span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-gt</span></span><span>&nbsp;0&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>A&nbsp;is&nbsp;greater&nbsp;than&nbsp;0</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>else</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>A&nbsp;is&nbsp;smaller&nbsp;than&nbsp;0</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div></pre>
<p>which prints &quot;A is greater than 0&quot; for <code>A=1</code>.</p>
<p>Note that we use arithmetic expression on variable <code>A</code>, i.e. <code>$((A))</code>, instead of simply use <code>${A}</code>. While both ways work when <code>A</code> contains a number, let us look into the difference between the two.</p>
<p>First, we assign an expression to <code>A</code> instead of a number, e.g. replace <code>A=1</code> with <code>A=1+2+3+4</code>. The script runs correctly without an error, since <code>$((A))</code> is expanded to <code>$((1+2+3+4))</code> and is evaluated to <code>10</code> when the conditions, <code>$((A)) -eq 0</code> and <code>$((A)) -gt 0</code>, are checked.</p>
<p>Then, we replace <code>$((A))</code> with <code>${A}</code>, and run the script. The script ends up with errors, since the expression <code>1+2+3+4</code> is not evaluated when the synxtax is <code>${A}</code>.</p>
<p>To summarize, <code>$(())</code> works when <code>A</code> is either a number or an arithmetic expression, while <code>${}</code> works only when <code>A</code> is a number.</p>
<p><a href="#top">(Back to top)</a></p>
<p><a name="expression"></a></p>
<h4 id="useful-expressions">Useful expressions</h4>
<h5 id="numeric-values">Numeric values</h5>
<ul>
<li>Less than, <code>-lt</code></li>
<li>Less than or equal, <code>-le</code></li>
<li>Equal, <code>-eq</code></li>
<li>Not equal, <code>-ne</code></li>
<li>Greater than or equal, <code>-ge</code></li>
<li>Greater than, <code>-gt</code></li>
</ul>
<p>and you may refer to the <a href="#conditionex">example on conditional statement</a>.</p>
<h4 id="strings">Strings</h4>
<p>We may check if a variable is empty using <code>-z</code>, e.g.</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>mystr=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>This&nbsp;is&nbsp;an&nbsp;OS&nbsp;course</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-z</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>mystr</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Ops...&nbsp;the&nbsp;string&nbsp;is&nbsp;empty.</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>else</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>The&nbsp;string&nbsp;is&nbsp;not&nbsp;empty.</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div></pre>
<h4 id="files-and-directories">Files and directories</h4>
<p>We may check if a file exists and is <em>regular</em> (see <a href="http://tldp.org/LDP/abs/html/fto.html">definition of <em>regular</em> files</a>) using <code>-f</code>, e.g.</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-f</span></span><span>&nbsp;example.txt&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>File&nbsp;example.txt&nbsp;exists.</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>else</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Ops...&nbsp;example.txt&nbsp;does&nbsp;not&nbsp;exist.</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div></pre>
<p>We may also check if a directory exists using <code>-d</code>, e.g. to create directory <code>testdir</code> if it does exists, otherwise report its existence</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>!</span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-d</span></span><span>&nbsp;testdir&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;mkdir&nbsp;testdir</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>else</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Directory&nbsp;testdir&nbsp;exists</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div></pre>
<p>See the GNU manual <a href="https://www.gnu.org/software/bash/manual/html_node/Bash-Conditional-Expressions.html">here</a> for more expressions for files and strings</p>
<p><a href="#top">(Back to top)</a></p>
<p><a name="loop"></a></p>
<h3 id="loops">Loops</h3>
<h4 id="for-loop">for-loop</h4>
<p>The format is</p>
<p><strong>for</strong> item <strong>in</strong> list <strong>do</strong> <em>statements</em> <strong>done</strong></p>
<p>An example <a href="code/forloop.sh">forloop.sh</a>,</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>A=</span><span class="meta scope subshell shell"><span class="punctuation definition subshell shell"><span>(</span></span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>a</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>b</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>c</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span class="punctuation definition subshell shell"><span>)</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>i</span></span><span>&nbsp;</span><span class="keyword control shell"><span>in</span></span><span>&nbsp;{1..10}</span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>i</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>done</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>char</span></span><span>&nbsp;</span><span class="keyword control shell"><span>in</span></span><span>&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>A</span><span class="punctuation section array shell"><span>[</span></span><span>@</span><span class="punctuation section array shell"><span>]</span></span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>char</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>done</span></span></span></span></div></pre>
<p>prints 1 to 10 and then &#39;a&#39; to &#39;c&#39;, with each number or character on a new line.</p>
<p><a href="#top">(Back to top)</a></p>
<h4 id="while-loop">while-loop</h4>
<p>The format is</p>
<p><strong>while</strong> <em>expression</em> <strong>do</strong> <em>statements</em> <strong>done</strong></p>
<p>An example <a href="code/whileloop.sh">whileloop.sh</a>,</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>A=0</span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>while</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>$((</span></span><span>A</span><span class="punctuation definition string end shell"><span>))</span></span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-lt</span></span><span>&nbsp;10&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>$((</span></span><span>A</span><span class="punctuation definition string end shell"><span>))</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>((</span></span><span>&nbsp;A</span><span class="keyword operator arithmetic shell"><span>++</span></span><span>&nbsp;</span><span class="punctuation definition string end shell"><span>))</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>done</span></span></span></span></div></pre>
<p>prints 0 to 9, with each number on a new line.</p>
<p><a href="#top">(Back to top)</a></p>
<p><a name="inout"></a></p>
<h3 id="input-output">Input / output</h3>
<h4 id="input-arguments-applies-to-both-functions-and-scripts-">Input arguments (applies to both functions and scripts)</h4>
<p>The input arguments are obtainable from <code>$@</code>.</p>
<p>The number of arguments is obtainable from <code>$#</code>.</p>
<p>To specify the <em>n</em>-th argument, use <code>$n</code>, e.g. first argument is <code>$1</code>.<code>$0</code> is a special argument that stores the name of the script. For example, this script (<a href="code/argument.sh">argument.sh</a>) prints the arguments to the script.</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>You&nbsp;called&nbsp;</span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>0</span></span><span>,&nbsp;with</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>#</span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-eq</span></span><span>&nbsp;0&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>no&nbsp;arguments...</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>exit</span></span><span>&nbsp;0</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>counter=0</span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>i</span></span><span>&nbsp;</span><span class="keyword control shell"><span>in</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>@</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>((</span></span><span>&nbsp;counter</span><span class="keyword operator arithmetic shell"><span>++</span></span><span>&nbsp;</span><span class="punctuation definition string end shell"><span>))</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Arg[</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>counter</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>]:&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>i</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>done</span></span></span></span></div></pre>
<p><em>Try:</em> Please remove the double quotes from <code>&quot;$@&quot;</code> in above script and try the following command <code>./arguments.sh First "Second argument"</code>.</p>

<p><a href="#top">(Back to top)</a></p>
<h4 id="capture-stdout-of-commands">Capture <code>stdout</code> of commands</h4>
<p>We may capture and store the output of a command to a variable, e.g. to execute the command <code>ls</code> and store the result into the variable <code>output</code></p>
<p><code>output=$(ls)</code></p>
<p>Note that the syntax <code>$(command)</code> means executing <code>command</code> (which is different from <code>$((expression))</code> for evaluating arithmetic expressions).</p>
<p>The exit status of the last executed command is always stored in <code>$?</code>.</p>
<p>See the following script, <a href="code/capture.sh">capture.sh</a>, which includes examples on the above usage,</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;capture&nbsp;stdout</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>output=</span><span class="string interpolated dollar shell"><span class="punctuation definition string begin shell"><span>$(</span></span><span>ls</span><span class="punctuation definition string end shell"><span>)</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Output&nbsp;of&nbsp;ls:&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>output</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;where&nbsp;is&nbsp;the&nbsp;exit&nbsp;status?</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>haha</span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>haha&nbsp;gives&nbsp;</span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>?</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span class="keyword operator list shell"><span>;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>hello_world</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>echo&nbsp;gives&nbsp;</span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>?</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div></pre>
<p><a name="ex4"></a></p>
<h5 id="go-through-a-file">Go through a file</h5>
<p>We may loop through a file using a while-loop (<a href="code/file_displayer.sh">file_displayer.sh</a>),</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>#</span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-lt</span></span><span>&nbsp;1&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>0</span></span><span>&nbsp;[file&nbsp;to&nbsp;display]</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>exit</span></span><span>&nbsp;1</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>if</span></span><span>&nbsp;</span><span class="meta scope logical-expression shell"><span class="punctuation definition logical-expression shell"><span>[</span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>!</span></span><span>&nbsp;</span><span class="keyword operator logical shell"><span>-f</span></span><span>&nbsp;</span><span class="variable other positional shell"><span class="punctuation definition variable shell"><span>$</span></span><span>1</span></span><span>&nbsp;</span><span class="punctuation definition logical-expression shell"><span>]</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>then</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Cannot&nbsp;display&nbsp;non-regular&nbsp;files</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>exit</span></span><span>&nbsp;1</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope if-block shell"><span class="keyword control shell"><span>fi</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>while</span></span><span>&nbsp;</span><span class="support function builtin shell"><span>read</span></span><span>&nbsp;line</span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>line</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>done</span></span></span><span>&nbsp;</span><span class="keyword operator redirect shell"><span>&lt;</span></span><span>&nbsp;</span><span class="variable other positional shell"><span class="punctuation definition variable shell"><span>$</span></span><span>1</span></span></span></div></pre>
<p>The script prints the file specified as the first input argument, e.g. to print <code>forloop.sh</code>,</p>
<p><code>$ ./file_displayer.sh forloop.sh</code></p>
<p>Except that trailing spaces are trimmed, e.g. indentations before <code>echo</code> and <code>exit</code> (you may compare the output against that from <code>$ cat forloop.sh</code> to see the difference).</p>
<p>The <code>while</code>-loop evaluates <code>read line</code>, with content read (operator <code>&lt;</code>) from the file named in <code>$f</code>. Note that if we omit both the redirection operator (<code>&lt;</code>) and file name, <code>read</code> will read input from standard input stream (<code>stdin</code>) instead.</p>
<p><a href="#top">(Back to top)</a></p>
<p><a name="function"></a></p>
<h3 id="functions">Functions</h3>
<p>The format is</p>
<p><strong>function</strong> function_name <strong>{</strong> <em>statements</em> <strong>}</strong></p>
<p>For example in <a href="code/function.sh">function.sh</a>,</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="storage type function shell"><span>function</span></span><span>&nbsp;</span><span class="entity name function shell"><span>addition</span></span><span>&nbsp;</span><span class="meta scope group shell"><span class="punctuation definition group shell"><span>{</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&nbsp;&nbsp;result=</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>$((</span></span><span class="variable other positional shell"><span class="punctuation definition variable shell"><span>$</span></span><span>1</span></span><span>&nbsp;</span><span class="keyword operator arithmetic shell"><span>+</span></span><span>&nbsp;</span><span class="variable other positional shell"><span class="punctuation definition variable shell"><span>$</span></span><span>2</span></span><span class="punctuation definition string end shell"><span>))</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span class="punctuation definition group shell"><span>}</span></span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="storage type function shell"><span>function</span></span><span>&nbsp;</span><span class="entity name function shell"><span>main</span></span><span>&nbsp;</span><span class="meta scope group shell"><span class="punctuation definition group shell"><span>{</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier shell"><span>local</span></span><span>&nbsp;a=1</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier shell"><span>local</span></span><span>&nbsp;b=2</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;result=</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;addition&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>a</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>b</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>a</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>+</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>b</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>=</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>result</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta function shell"><span class="meta scope group shell"><span class="punctuation definition group shell"><span>}</span></span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>main</span></span></div></pre>
<p>we have two functions. The first one named <code>addition</code> adds up the first two input arguments. The second one named <code>main</code> calls <code>addition</code> and prints the result of adding <code>a=1</code> and <code>b=2</code>.</p>
<p>After executing it, you get &quot;1+2=3&quot; printed.</p>
<p>We can use <code>addition "$@"</code> to pass the input arguments to the function. For example in <a href="code/function2.sh">function2.sh</a>,</p></p>
<p><a href="#top">(Back to top)</a></p>
<p><a name="processing"></a></p>
<h2 id="examples-on-content-processing">Examples on Content Processing</h2>
<p><a name="ifs"></a></p>
<h3 id="string-splitting-with-ifs-">String splitting with <code>IFS</code></h3>
<p><code>IFS</code> stands for &quot;<em>Internal Field Separator</em>&quot;, which is an environment variable that determines boundaries of words, i.e., it contains word <em>delimiters</em>. By default, the delimiters are space, tab, and newline character.</p>
<p>We may change <code>IFS</code> during runtime. For example, to print only words between full-stops (.), we may assign a full-stop to <code>IFS</code>, see <a href="code/ifs.sh">ifs.sh</a></p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>mystr=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>name.email.phone.remarks</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span>IFS=</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>.</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>word</span></span><span>&nbsp;</span><span class="keyword control shell"><span>in</span></span><span>&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>mystr</span><span class="punctuation section array shell"><span>[</span></span><span>@</span><span class="punctuation section array shell"><span>]</span></span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="variable other normal shell"><span class="punctuation definition variable shell"><span>$</span></span><span>word</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>done</span></span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="comment line number-sign shell"><span class="punctuation definition comment shell"><span>#</span></span><span>&nbsp;restore&nbsp;&nbsp;IFS</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>IFS=</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>&nbsp;</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span class="string quoted single dollar shell"><span class="punctuation definition string begin shell"><span>$&#39;</span></span><span class="constant character escape ansi-c shell"><span>\n</span></span><span class="punctuation definition string end shell"><span>&#39;</span></span><span class="punctuation definition string begin shell"><span>$&#39;</span></span><span class="constant character escape ansi-c shell"><span>\t</span></span><span class="punctuation definition string end shell"><span>&#39;</span></span></span></span></div></pre>
<p><a href="#top">(Back to top)</a></p>
<p><a name="awk"></a></p>
<h3 id="string-splitting-using-awk-and-print-designated-fields">String splitting using <code>awk</code>, and print designated fields</h3>
<p>If we want to</p>
<ol>
<li>split a string &quot;first_name,middle_name,last_name&quot; based on a comma (<code>,</code>), and</li>
<li>print only &quot;first_name&quot; and &quot;last_name&quot; with a space in between</li>
</ol>
<p>we may use the command <code>awk</code> as follows</p>
<p><code>$ echo &quot;first_name,middle_name,last_name&quot; | awk -F&#39;,&#39; &#39;{print $1&quot; &quot;$3}&#39;</code></p>
<p>This command first pipes the string output by <code>echo</code> as the input of <code>awk</code>. Then, <code>awk</code> takes the character specified after the option <code>-F</code> as a delimiter to break the string. <code>awk</code> prints the first field (<code>$1</code>) and the third field (<code>$3</code>), with a space (<code>&quot; &quot;</code>) in between.</p>
<p>Given a comma separated value (csv) file <a href="code/data.csv">data.csv</a>, we may list only the first and third column of the file using the following script <a href="code/process_csv.sh">process_csv.sh</a>,</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>while</span></span><span>&nbsp;</span><span class="support function builtin shell"><span>read</span></span><span>&nbsp;line</span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>line</span><span class="punctuation definition variable shell"><span>}</span></span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator pipe shell"><span>|</span></span><span>&nbsp;awk&nbsp;-F</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>,</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span><span>&nbsp;</span><span class="string quoted single shell"><span class="punctuation definition string begin shell"><span>&#39;</span></span><span>{print&nbsp;$1&quot;&nbsp;&quot;$3}</span><span class="punctuation definition string end shell"><span>&#39;</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope while-loop shell"><span class="keyword control shell"><span>done</span></span></span><span>&nbsp;</span><span class="keyword operator redirect shell"><span>&lt;</span></span><span>&nbsp;data.csv</span></span></div></pre>
<p><a href="#top">(Back to top)</a></p>
<p><a name="count"></a></p>
<h3 id="counting-lines-words-and-characters-wc-">Counting lines, words, and characters, <code>wc</code></h3>
<p><code>wc</code> allows us to count characters (with option <code>-c</code>), words (with option <code>-w</code>) and lines (with option <code>-l</code>). It goes through files when they are provided. Otherwise, it processes input from <code>stdin</code>.</p>
<p>For example in <a href="code/file_summary.sh">file_summary.sh</a>,</p>
<pre class="editor-colors lang-bash"><div class="line"><span class="source shell"><span class="comment line number-sign shebang shell"><span class="punctuation definition comment shebang shell"><span>#!</span></span><span>/bin/bash</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source shell"><span>&nbsp;</span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>for</span></span><span>&nbsp;</span><span class="variable other loop shell"><span>f</span></span><span>&nbsp;</span><span class="keyword control shell"><span>in</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span class="variable other special shell"><span class="punctuation definition variable shell"><span>$</span></span><span>@</span></span><span class="punctuation definition string end shell"><span>&quot;</span></span></span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;counter=0</span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;wc&nbsp;-l&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>f</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta scope while-loop shell"><span class="keyword control shell"><span>while</span></span><span>&nbsp;</span><span class="support function builtin shell"><span>read</span></span><span>&nbsp;line</span><span class="keyword operator list shell"><span>;</span></span><span>&nbsp;</span><span class="keyword control shell"><span>do</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>((</span></span><span>&nbsp;counter&nbsp;</span><span class="keyword operator arithmetic shell"><span>++</span></span><span>&nbsp;</span><span class="punctuation definition string end shell"><span>))</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chars=</span><span class="string interpolated dollar shell"><span class="punctuation definition string begin shell"><span>$(</span></span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;-n&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>line</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;</span><span class="keyword operator pipe shell"><span>|</span></span><span>&nbsp;wc&nbsp;-c</span><span class="punctuation definition string end shell"><span>)</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;words=</span><span class="string interpolated dollar shell"><span class="punctuation definition string begin shell"><span>$(</span></span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;-n&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>line</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;</span><span class="keyword operator pipe shell"><span>|</span></span><span>&nbsp;wc&nbsp;-w</span><span class="punctuation definition string end shell"><span>)</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function builtin shell"><span>echo</span></span><span>&nbsp;</span><span class="string quoted double shell"><span class="punctuation definition string begin shell"><span>&quot;</span></span><span>Line&nbsp;</span><span class="string other math shell"><span class="punctuation definition string begin shell"><span>$((</span></span><span>counter</span><span class="punctuation definition string end shell"><span>))</span></span></span><span>:&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>chars</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;chars,&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>words</span><span class="punctuation definition variable shell"><span>}</span></span></span><span>&nbsp;words</span><span class="punctuation definition string end shell"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="meta scope while-loop shell"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control shell"><span>done</span></span></span><span>&nbsp;</span><span class="keyword operator redirect shell"><span>&lt;</span></span><span>&nbsp;</span><span class="variable other bracket shell"><span class="punctuation definition variable shell"><span>${</span></span><span>f</span><span class="punctuation definition variable shell"><span>}</span></span></span></span></span></div><div class="line"><span class="source shell"><span class="meta scope for-in-loop shell"><span class="keyword control shell"><span>done</span></span></span></span></div></pre>
<p>files are accepted as input arguments. For each file, the script prints the total number of lines together with the file name, followed by the number of characters and words in each line. Note <strong>the option <code>-n</code> suppresses <code>echo</code> from adding a newline character at the end of a string</strong>.</p>
<p><a href="#top">(Back to top)</a></p>
<p><a name="exercise"></a></p>
<h2 id="exercise">Exercise</h2>
<p><a name="exvar"></a></p>
<h3 id="variables">Variables</h3>
<ol>
<li><p>Run <a href="code/global_vs_local.sh">global_vs_local.sh</a> and study the difference between global variables (<code>global1</code> and <code>global2</code>) and local variables (<code>local1</code>)</p>
<!--
global variables are visible to statements after it is defined, while local ones are visible only within a function (in our example)
-->
</li>
</ol>
<p><a name="exprocess"></a></p>
<h3 id="content-processing">Content processing</h3>
<ol>
<li>How to print each matching phrase on a newline using <code>grep</code>?</li>
<li>Write a script to output a summary on a set of files in csv format. The set of files are given as input arguments. Each line shows (1) the file name, (2) the total number of characters, (3) the total number of words, and (4) the total number of lines, in a file</li>
<li><p>How to modify the script in this <a href="#ex4">example</a> to avoid trailing spaces being trimmed? (or think about why the spaces are &quot;trimmed&quot; in the first place? :) )</p>
<!-- Ans. to 1
Check out the option "-o" in "grep"'s manual page
-->
<!-- Ans. to 2
#!/bin/bash

for f in "$@"; do
 chars=$(wc -c ${f} | awk '{print $1}')
 words=$(wc -w ${f} | awk '{print $1}')
 lines=$(wc -l ${f} | awk '{print $1}')
 echo "${f},${chars},${words},${lines}"
done
-->
<!-- Ans. to 3
set IFS='' at the beginning of the script
-->
</li>
</ol>
<p><a href="#top">(Back to top)</a></p>
<p><a name="ref"></a></p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html">Bash Programming - Introduction HOW-TO</a><ul>
<li><a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-5.html">Variables</a></li>
<li><a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-10.html#ss10.2">Arithmetic</a></li>
<li><a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-6.html">If ... then ... else ...</a></li>
<li><a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-7.html">Loops</a></li>
<li><a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-8.html">Functions</a></li>
</ul>
</li>
<li><a href="http://tldp.org/LDP/Bash-Beginners-Guide/html/">Bash Guide for Beginners</a><ul>
<li><a href="http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_10_02.html">Array</a></li>
</ul>
</li>
<li><a href="http://tldp.org/LDP/abs/html/">Advanced Bash-Scripting Guide</a><ul>
<li><a href="http://tldp.org/LDP/abs/html/localvar.html">Local variables</a></li>
<li><a href="http://www.tldp.org/LDP/abs/html/io-redirection.html">I/O redirection</a></li>
<li><a href="http://tldp.org/LDP/abs/html/internalvariables.html">Internal field separator <code>IFS</code></a></li>
</ul>
</li>
</ul>
<p><a href="#top">(Back to top)</a></p></body>
</html>
